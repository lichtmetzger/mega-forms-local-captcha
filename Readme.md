# Mega Forms - Local Captcha Addon

## Dependencies

First install composer:
https://getcomposer.org/download/

Then initialize it in the project folder:
```
composer install --no-dev
composer dump-autoload -o --no-dev
```

(Omit the --no-dev parameter if you want to use wpcs.)

This project is based on Node version 18.16.0. **If you use a different version and commit a reformatted package.json, you will be punished.**

Install it with nvm:

```
sudo apt install curl gnupg2 -y
curl https://raw.githubusercontent.com/creationix/nvm/master/install.sh | bash
source ~/.bashrc
nvm install 18.16.0
nvm use
```

Then, use the npm package manager to install the project-specific (dev-)dependencies (wp-scripts, sass, stylelint-config).

```
npm i
```

## Translations

Translation files are generated by the wp-cli bundle, specifically the "wp-cli i18n" command. The translation domain for all strings is "mega-forms-local-captcha". Install wp-cli via composer:

```
composer install
```

Then, run

```
make pot
```

to generate a master file with all of the language definitions. You can use PoEdit to create .po and .mo files with your translations and put them into the languages directory.

## Building the main CSS file

The CSS of this plugin is generated by sass.
scss/main.scss is compiled into css/main.css.

The intended way to build this is to use sass included by npm:

    npm run build-css

## Build release ZIP file

Make sure zip is installed:

    sudo apt install zip

Then run:

    make release

and you will get an unbloated mega-forms-local-captcha.zip that you can install in WordPress.
